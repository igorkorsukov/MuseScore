@echo off
ECHO "MuseScore test url"

SET ARTIFACTS_DIR=build.artifacts
SET BUILD_NUMBER=""
SET TELEMETRY_TRACK_ID=""
SET CRASH_LOG_SERVER_KEY=""
SET TARGET_PROCESSOR_BITS=64
SET BUILD_WIN_PORTABLE=OFF
SET BUILD_UI_MU4=OFF		# not used, only for easier synchronization and compatibility

:GETOPTS
IF /I "%1" == "-n" SET BUILD_NUMBER=%2& SHIFT
IF /I "%1" == "-b" SET TARGET_PROCESSOR_BITS=%2& SHIFT
IF /I "%1" == "--telemetry" SET TELEMETRY_TRACK_ID=%2& SHIFT
IF /I "%1" == "--crashurl" SET CRASH_LOG_SERVER_KEY=%2& SHIFT
IF /I "%1" == "--portable" SET BUILD_WIN_PORTABLE=%2& SHIFT
IF /I "%1" == "--build_mu4" SET BUILD_UI_MU4=%2& SHIFT
SHIFT
IF NOT "%1" == "" GOTO GETOPTS

IF %CRASH_LOG_SERVER_KEY% == "" ( 
    SET CRASH_LOG_SERVER_URL=
) ELSE ( 
    SET CRASH_LOG_SERVER_URL="https://sentry.musescore.org/api/2/minidump/?sentry_key=%CRASH_LOG_SERVER_KEY%" 
)

IF %CRASH_LOG_SERVER_KEY% == "''" ( 
    SET CRASH_LOG_SERVER_URL=
) ELSE ( 
    SET CRASH_LOG_SERVER_URL="https://sentry.musescore.org/api/2/minidump/?sentry_key=%CRASH_LOG_SERVER_KEY%" 
)

ECHO "MUSESCORE_BUILD_CONFIG: %MUSESCORE_BUILD_CONFIG%"
ECHO "BUILD_NUMBER: %BUILD_NUMBER%"
ECHO "TARGET_PROCESSOR_BITS: %TARGET_PROCESSOR_BITS%"
ECHO "TELEMETRY_TRACK_ID: %TELEMETRY_TRACK_ID%"
ECHO "CRASH_LOG_SERVER_URL: %CRASH_LOG_SERVER_URL%"
ECHO "BUILD_WIN_PORTABLE: %BUILD_WIN_PORTABLE%"
ECHO "BUILD_UI_MU4: %BUILD_UI_MU4%"

